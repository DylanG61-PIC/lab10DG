<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Scatter Plot Lab</title>
  <style>
    svg {
      border: 1px solid black;
    }
    circle {
      fill: #4caf50; 
      opacity: 0.8;
      cursor: pointer;
      transition: fill 0.2s;
    }
    circle:hover {
      fill: #ff5722; 
    }
    text {
      font-family: sans-serif;
      font-size: 14px;
    }
    .axis line {
      stroke: black;
      stroke-width: 1;
    }
    .axis text {
      font-size: 12px; 
    }
  </style>
</head>
<body>
  <h1>Scatter Plot Lab</h1>
  <svg width="600" height="400"></svg>

  <script>
    const svg = document.querySelector("svg");
    const width = +svg.getAttribute("width");
    const height = +svg.getAttribute("height");
    const padding = 50;

    fetch("data.json")
      .then(response => response.json())
      .then(data => createScatterPlot(data))
      .catch(err => console.error("Error loading data:", err));

    function createScatterPlot(data) {
      const xValues = data.map(d => d.x);
      const yValues = data.map(d => d.y);

      const xMin = Math.min(...xValues);
      const xMax = Math.max(...xValues);
      const yMin = Math.min(...yValues);
      const yMax = Math.max(...yValues);

      const xScale = d => padding + ((d - xMin) / (xMax - xMin)) * (width - 2 * padding);
      const yScale = d => height - padding - ((d - yMin) / (yMax - yMin)) * (height - 2 * padding);

      data.forEach(d => {
        const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circle.setAttribute("cx", xScale(d.x));
        circle.setAttribute("cy", yScale(d.y));
        circle.setAttribute("r", 8);
        svg.appendChild(circle);
      });

      const title = document.createElementNS("http://www.w3.org/2000/svg", "text");
      title.setAttribute("x", width / 2);
      title.setAttribute("y", padding / 2);
      title.setAttribute("text-anchor", "middle");
      title.setAttribute("font-size", "18px");
      title.textContent = "Scatter Plot with Axes";
      svg.appendChild(title);

      drawAxis(svg, xScale, xMin, xMax, padding, width, height, true);  // x-axis
      drawAxis(svg, yScale, yMin, yMax, padding, width, height, false); // y-axis
    }

    function drawAxis(svg, scaleFunc, minVal, maxVal, padding, width, height, isXAxis) {
      const numTicks = 5;
      for (let i = 0; i <= numTicks; i++) {
        const val = minVal + (i / numTicks) * (maxVal - minVal);
        const tick = document.createElementNS("http://www.w3.org/2000/svg", "line");
        const label = document.createElementNS("http://www.w3.org/2000/svg", "text");

        if (isXAxis) {
          const x = scaleFunc(val);
          tick.setAttribute("x1", x);
          tick.setAttribute("y1", height - padding);
          tick.setAttribute("x2", x);
          tick.setAttribute("y2", height - padding + 6);
          label.setAttribute("x", x);
          label.setAttribute("y", height - padding + 20);
          label.setAttribute("text-anchor", "middle");
          label.textContent = val.toFixed(0);
        } else {
          const y = scaleFunc(val);
          tick.setAttribute("x1", padding - 6);
          tick.setAttribute("y1", y);
          tick.setAttribute("x2", padding);
          tick.setAttribute("y2", y);
          label.setAttribute("x", padding - 10);
          label.setAttribute("y", y + 4);
          label.setAttribute("text-anchor", "end");
          label.textContent = val.toFixed(0);
        }

        tick.setAttribute("stroke", "black");
        svg.appendChild(tick);
        svg.appendChild(label);
      }

      const axisLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
      if (isXAxis) {
        axisLine.setAttribute("x1", padding);
        axisLine.setAttribute("y1", height - padding);
        axisLine.setAttribute("x2", width - padding);
        axisLine.setAttribute("y2", height - padding);
      } else {
        axisLine.setAttribute("x1", padding);
        axisLine.setAttribute("y1", padding);
        axisLine.setAttribute("x2", padding);
        axisLine.setAttribute("y2", height - padding);
      }
      axisLine.setAttribute("stroke", "black");
      axisLine.setAttribute("stroke-width", 1.5);
      svg.appendChild(axisLine);
    }
  </script>
</body>
</html>
